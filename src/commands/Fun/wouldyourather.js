const { SlashCommandBuilder, EmbedBuilder, ButtonBuilder, ActionRowBuilder, ButtonStyle } = require('discord.js');
const { InteractionResponseFlags } = require('discord-api-types/v10');

module.exports = {
    data: new SlashCommandBuilder()
    .setName('wouldyourather')
    .setDescription('Би ли?'),
    
    async execute(interaction) {
        const questions = [
            "Бихте ли предпочели да имате ветроходна лодка като дом или каравана като дом?",
            "Бихте ли предпочели да се ожените за някой красив, но глупав или умен, но грозен?",
            "Бихте ли предпочели да се откажете от всички напитки, освен от вода, или да се откажете от яденето на неща, които са готвени в фурна?",
            "Бихте ли предпочели да можете да виждате 10 минути в собственото си бъдеще или 10 минути в бъдещето на някой друг?",
            "Бихте ли предпочели да пуснете силно газ всеки път, когато имате сериозен разговор, или да трябва да прехърляте след всяка целувка?",
            "Бихте ли предпочели да станете два пъти по-силни, когато и двата ви пръста са заседнали в ушите, или да пълзите два пъти по-бързо, отколкото да можете да бягате?",
            "Бихте ли предпочели всичко, което рисувате, да стане реално, но да сте постоянно ужасни в рисуването, или да можете да летите, но само с бързината на ходене?",
            "Бихте ли предпочели да се появят 30 пеперуди веднага след всяко кихане или едно много ядосано катерица да се появи след всяко кашляне?",
            "Бихте ли предпочели да повръщате неконтролируемо за една минута всеки път, когато чуете песента 'Happy Birthday', или да получавате главоболие, което трае целия ден, всеки път, когато видите птица (включително в снимки или видео)?",
            "Бихте ли предпочели да изядете сандвич, направен от 4 произволни съставки от хладилника ви, или да изядете сандвич, направен от група ваши приятели с 4 произволни съставки от хладилника ви?",
            "Бихте ли предпочели всички да бъдат задължени да носят еднакви сребърни гащеризони или всякога, когато двама души се срещнат и носят еднакви дрехи, да трябва да се сражават до смърт?",
            "Бихте ли предпочели да трябва да четете на глас всяка дума, която четете, или да пеете всичко, което казвате на глас?",
            "Бихте ли предпочели да носите сватбена рокля/смокинг всеки ден или да носите бански всеки ден?",
            "Бихте ли предпочели да не можете да движите тялото си всеки път, когато вали дъжд, или да не можете да спирате да се движите, докато слънцето свети?",
            "Бихте ли предпочели всички кучета да се опитват да ви атакуват или да изядете буболечка или муха?",
            "Бихте ли предпочели да оближете пода или метла?",
            "Бихте ли предпочели да ядете сладолед или торта?",
            "Бихте ли предпочели да почиствате тоалетна или да сменяте пелени на бебе?",
            "Бихте ли предпочели да оближете клавиатурата си или мишката?",
            "Бихте ли предпочели да миете косата си с пюре от картофи или сос от боровинки?",
            "Бихте ли предпочели да се сътрудничите с Жената чудо или с Капитан Марвел?",
            "Бихте ли предпочели да намерите истинската си любов или да спечелите лотарията следващия месец?",
            "Бихте ли предпочели да бъдете принудени да пеете или да танцувате на всяка песен, която чуете?",
            "Бихте ли предпочели всички, които познавате, да могат да четат мислите ви или всички, които познавате, да имат достъп до интернет историята ви?",
            "Бихте ли предпочели да бъдете хронично поддрешени или прекалено облечени?",
            "Бихте ли предпочели да загубите зрението си или паметта си?",
            "Бихте ли предпочели да имате всеобщо уважение или неограничена сила?",
            "Бихте ли предпочели да се откажете от климатик и отопление за остатъка от живота си или да се откажете от интернет за остатъка от живота си?",
            "Бихте ли предпочели да плувате в басейн пълен с Нутела или в басейн пълен с кленов сироп?",
            "Бихте ли предпочели да работите под горещо слънце или при екстремно студено време?",
            "Бихте ли предпочели да останете вътре в снежен ден или да построите фортификация?",
            "Бихте ли предпочели да купувате 10 неща, които не ви трябват всеки път, когато пазарувате, или да забравяте нещо важно всякога, когато отидете в магазина?",
            "Бихте ли предпочели никога да не можете да излизате през деня или никога да не можете да излизате през нощта?",
            "Бихте ли предпочели да имате личен слуга или личен готвач?",
            "Бихте ли предпочели да имате таланта на Бионсе или бизнес способностите на Джей Зи?",
            "Бихте ли предпочели да бъдете статист в филм, спечелил Оскар, или главен герой в касова катастрофа?",
            "Бихте ли предпочели да повърнете върху героя си или той да повърне върху вас?",
            "Бихте ли предпочели да комуникирате само с емоджита или никога да не можете да пишете съобщения отново?",
            "Бихте ли предпочели да бъдете кралски особи от 1000 години назад или обикновен човек днес?",
            "Бихте ли предпочели да се отпуснете край басейна или на плажа?",
            "Бихте ли предпочели да носите същите чорапи за месец или същото бельо за седмица?",
            "Бихте ли предпочели да работите извънредно с вашия дразнещ шеф или да прекарате целия ден с тъщата си?",
            "Бихте ли предпочели да се прегърнете с коала или да се разхождате с панда?",
            "Бихте ли предпочели да имате състезание за пеене с Ариана Гранде или за танцуване с Риана?",
            "Бихте ли предпочели да гледате само филми на Hallmark за Коледа или само хорър филми?",
            "Бихте ли предпочели винаги да сте 10 минути закъснели или винаги да сте 20 минути рано?",
            "Бихте ли предпочели да имате бутон за пауза или за превъртане назад в живота си?",
            "Бихте ли предпочели да загубите всички зъби или да губите по един ден от живота си всеки път, когато целувате някого?",
            "Бихте ли предпочели да пиете от тоалетната или да пишкате в кутия за котки?",
            "Бихте ли предпочели да бъдете принудени да живеете един и същи ден всеки ден за една година или да вземете 3 години от края на живота си?",
            "Бихте ли предпочели да не ядете никога диня отново или да бъдете принудени да ядете диня с всяко ядене?",
            "Бихте ли предпочели да отидете в Харвард, но да завършите без работа, или да завършите от друг университет и да работите в Харвард?",
            "Бихте ли предпочели пришълците, които правят първи контакт, да бъдат роботизирани или органични?",
            "Бихте ли предпочели да загубите способността да четете или да загубите способността да говорите?",
            "Бихте ли предпочели да имате златен глас или сребърни устни?",
            "Бихте ли предпочели да бъдете покрити с коса или с люспи?",
            "Бихте ли предпочели да бъдете в затвор за една година или да изгубите една година от живота си?",
            "Бихте ли предпочели да имате истински пропуск за излизане от затвора или ключ, който отваря всяка врата?",
            "Бихте ли предпочели да знаете историята на всеки обект, който докосвате, или да можете да говорите с животни?",
            "Бихте ли предпочели да бъдете женени за 10 с лош характер или за 6 с невероятен характер?",
            "Бихте ли предпочели да можете да говорите с животни на сушата, животни, които летят, или животни, които живеят под водата?",
            "Бихте ли предпочели всички светофари, на които се приближавате, да са зелени или никога да не се налага да чакате на опашка отново?",
            "Бихте ли предпочели да прекарвате остатъка от живота си с когато ви видят или всички птици да се опитват да ви атакуват, когато ви видят?",
            "Бихте ли предпочели да бъдете принудени да давате високи петдесетки на всеки, когото срещнете или да трябва да правите няколко екстра високи на всеки, който носи зелена риза?",
            "Бихте ли предпочели да имате кожа, която променя цветове в зависимост от вашите емоции или татуировки, които се появяват по цялото ви тяло, които изобразяват това, което сте направили вчера?",
            "Бихте ли предпочели да пътувате във времето с плюс или минус 20 години всеки път когато пуснете газ или да телепортирате на друго място по света (на сушата, не на водата) всеки път, когато кихате?",
            "Бихте ли предпочели в града ви да има война с водни балони или постоянна хранителна битка?",
            "Бихте ли предпочели да имате куче с котешка личност или котка с кучешка личност?",
            "Ако се прераждате в нов живот, бихте ли предпочели да бъдете живи в миналото или бъдещето?",
            "Бихте ли предпочели да не ядете бонбони на Хелоуин или да не ядете пуешко на Деня на благодарността?",
            "Бихте ли предпочели да излизате с някой, когото обичате, или с някой, който ви обича?",
            "Бихте ли предпочели да изгубите способността да лъжете или да вярвате на всичко, което ви кажат?",
            "Бихте ли предпочели да бъдете свободни или напълно безопасни?",
            "Бихте ли предпочели да ядете фекалии, които имат вкус на шоколад, или да ядете шоколад, който има вкус на изпражнения?",
            "Бихте ли предпочели да изглеждате с 10 години по-стари от врата нагоре или по тялото?",
            "Бихте ли предпочели да бъдете изключително поднормени или изключително наднормени?",
            "Бихте ли предпочели да преживеете началото на планетата Земя или края й?",
            "Бихте ли предпочели да имате три деца без пари или да нямате деца с три милиона долара?",
            "Бихте ли предпочели да бъдете на сцена на концерт или на сцена на театър?",
            "Бихте ли предпочели да правите непрекъснати пътешествия или да останете в родния си град?",
            "Бихте ли предпочели да не можете да се къпете или да не можете да ходите?",
            "Бихте ли предпочели да се откажете от вкусна храна или да се отказвате от всякаква храна изцяло?"];

        const randomize = questions[Math.floor(Math.random() * questions.length)];

        // Initial Embed with more vibrant color
        const embed = new EmbedBuilder()
            .setTitle('❓︱Кое би избрал?')
            .setDescription(randomize)
            .setColor('#FF6347')  // Tomato red color for a more eye-catching embed
            .setTimestamp();

        // Option 1 Embed with bright color
        const embed1 = new EmbedBuilder()
            .setTitle('❓︱Кое би избрал?')
            .addFields({ name: "Въпрос", value: `${randomize}`, inline: true })
            .setDescription('Избра първото!')
            .setColor('#32CD32')  // Lime green color for the first choice
            .setTimestamp();

        // Option 2 Embed with bright color
        const embed2 = new EmbedBuilder()
            .setTitle('❓︱Кое би избрал?')
            .addFields({ name: "Въпрос", value: `${randomize}`, inline: true })
            .setDescription('Избра второто!')
            .setColor('#1E90FF')  // Dodger blue color for the second choice
            .setTimestamp();

        // Buttons for Options with custom colors
        const button = new ActionRowBuilder()
            .addComponents(
                new ButtonBuilder()
                    .setCustomId('option1')
                    .setLabel('Избирам 1')
                    .setStyle(ButtonStyle.Success)  // Green button for first option
                    .setEmoji('1️⃣'),  // Emoji to make it more fun
                new ButtonBuilder()
                    .setCustomId('option2')
                    .setLabel('Избирам 2')
                    .setStyle(ButtonStyle.Secondary)  // Grey button for second option
                    .setEmoji('2️⃣'),  // Emoji to match the choice theme
            );

        // Send message with embed and buttons
        const message = await interaction.reply({ embeds: [embed], components: [button] });

        // Create a message collector for button interactions
        const collector = message.createMessageComponentCollector({ time: 15000 }); // 15 seconds timeout

        collector.on('collect', async i => {
            // Ensure the interaction is from the same user who triggered the command
            if (i.user.id !== interaction.user.id) {
                return await i.reply({ content: "Ако искаш да играеш напиши -> /wouldyourather", flags: InteractionResponseFlags.Ephemeral });
            }

            // Update the message based on the button clicked
            if (i.customId === 'option1') {
                await i.update({ embeds: [embed1], components: [] });
            } else if (i.customId === 'option2') {
                await i.update({ embeds: [embed2], components: [] });
            }
        });

        collector.on('end', () => {
            // Disable buttons after the time runs out
            message.edit({ components: [] });
        });
    }
};
